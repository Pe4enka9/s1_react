import{j as l,r as c}from"./date-DgmWt_b0.js";import{I as q}from"./forms-Bcu1OiOT.js";function G({children:n}){return l.jsx("div",{className:"step-wrapper",children:n})}function J({id:n,label:t,children:e,isPasswordHidden:a,setIsPasswordHidden:s,error:h="",isPassword:o=!1}){const u=c.useCallback(()=>{typeof a=="object"?n==="password"?s(i=>({...i,password_register:!i.password_register})):n==="password_confirmation"&&s(i=>({...i,password_confirmation:!i.password_confirmation})):s(i=>!i)},[n,a,s]);return l.jsxs("div",{className:"field",children:[l.jsx("label",{htmlFor:n,children:t}),e,h&&l.jsx("p",{className:"error",children:h}),o&&l.jsx("button",{type:"button",className:`eye-password ${a?"hidden":"visible"}`,onClick:u})]})}function K(n,t){return(n==="8"||n.startsWith("8"))&&t.value===""?""+n.substring(1):n}function O({formData:n,setFormData:t,errors:e,setErrors:a,inputRef:s=null}){const h=c.useCallback(o=>{t(u=>({...u,phone_number:o})),a(u=>({...u,phone_number:""}))},[a,t]);return l.jsx(q,{mask:"+{7} (000) 000-00-00",type:"tel",inputMode:"tel",name:"phone_number",id:"phone_number",className:e.phone_number?"error-input":"",placeholder:"+7 (000) 000-00-00",value:n.phone_number,onAccept:o=>h(o),prepare:(o,u)=>K(o,u),autoComplete:"tel phone",enterKeyHint:"next",inputRef:s})}function C(n,t=!1){if(t)return;let e=0,a=0;const s=o=>{e=o.changedTouches[0].pageY},h=o=>{a=o.changedTouches[0].pageY,e<a&&Math.abs(a-e)>100&&n()};return document.addEventListener("touchstart",s),document.addEventListener("touchend",h),()=>{document.removeEventListener("touchstart",s),document.removeEventListener("touchend",h)}}function Q({isActive:n,setIsActive:t,currentStep:e,setCurrentStep:a,steps:s,isDisabledButton:h,setIsDisabledButton:o,isServerError:u,isLoading:i,direction:g,setDirection:f,prevStep:b,setPrevStep:m,isAnimating:p,setIsAnimating:d,id:w=null,failedValidation:v=()=>{},icon:E=null,title:F="Форма",buttonText:Y="Отправить",progressLabels:L=[],onSubmit:k=()=>{},isCalendar:T=!1,isCalendarActive:_=!1}){const[M,$]=c.useState(!1),j=c.useRef(null),R=c.useCallback(()=>{e<=1||(f("prev"),m(e),a(r=>r-1))},[e,a,f,m]),y=c.useCallback(()=>{e>=s.length||(f("next"),m(e),a(r=>r+1))},[e,a,f,m,s.length]),x=c.useCallback(()=>{$(!0),d(!1),j.current=setTimeout(()=>t(!1),1e3)},[t,d]),B=c.useCallback(r=>{r.preventDefault(),e===s.length?k():y()},[e,y,k,s.length]);return c.useEffect(()=>{o(v())},[v,o]),c.useEffect(()=>()=>{j.current&&clearTimeout(j.current)},[]),c.useEffect(()=>{n&&($(!1),requestAnimationFrame(()=>d(!0)))},[n,t,d]),c.useEffect(()=>T?C(x,_):C(x),[x,T,_]),c.useEffect(()=>{if(n&&e===0){const r=setTimeout(()=>a(N=>N+1),1e3);return()=>clearTimeout(r)}},[e,n,a]),l.jsx(l.Fragment,{children:n&&l.jsx("div",{className:`modal ${p?"active":""}`,children:l.jsxs("form",{id:w,className:`${p?"active":""} ${M?"closing":""}`,onSubmit:B,children:[l.jsxs("div",{className:`steps-progress step-${e}`,children:[l.jsx("div",{className:"steps-name",children:L.map((r,N)=>l.jsx("p",{className:"small",children:r},N))}),l.jsx("div",{className:"steps-progress-bar"})]}),l.jsxs("div",{className:"title",children:[E&&l.jsx("div",{className:"icon",children:E}),l.jsx("h4",{children:F})]}),l.jsxs("div",{className:"step-container",children:[b!==null&&l.jsx("div",{className:`step leaving ${g==="next"?"slide-out-left":"slide-out-right"}`,onAnimationEnd:()=>m(null),children:s[b-1]},`step-${b}`),l.jsx("div",{className:`step entering ${g==="next"?"slide-in-right":"slide-in-left"}`,children:s[e-1]},`step-${e}`)]}),l.jsxs("div",{className:"buttons",children:[l.jsxs("button",{type:"submit",className:"btn",disabled:h||i,children:[e===s.length&&!u?Y:e===s.length&&u?"Ошибка сервера":"Продолжить",l.jsx("div",{className:`loader ${i?"active":""}`})]}),l.jsx("button",{type:"button",className:"btn cancel",onClick:e===1?x:R,children:e===1?"Отмена":"Назад"})]})]})})})}export{Q as B,J as I,O as P,G as S};
